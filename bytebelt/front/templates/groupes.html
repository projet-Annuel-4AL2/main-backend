{% extends "base.html" %}

{% block title %}All groupes{% endblock %}

{% block content %}
<div class="px-40 flex flex-1 justify-center py-5">
    <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
        <div id="allGroupe">
            {% for groupe in groupes%}
            <div class="groupe flex items-center gap-4 bg-black px-4 min-h-[72px] py-2 justify-between">
              <div class="flex items-center gap-4">
                <div
                  class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-14 w-fit"
                  style='background-image: url("{{ groupe.group_pic }}");'
                ></div>
                <div class="flex flex-col justify-center">
                  <a href="{% url 'group' groupe.name %}" class="text-[#FFFFFF] text-base font-medium leading-normal line-clamp-1">{{ groupe.name }}</a>
                  <p class="text-[#CBCBCB] text-sm font-normal leading-normal line-clamp-2">{{groupe.description}}</p>
                </div>
              </div>
              <div class="shrink-0">
                <div class="text-[#FFFFFF] flex size-7 items-center justify-center" data-icon="DiscordLogo" data-size="24px" data-weight="regular">
                    <svg viewBox="0 0 350 350" style="color:currentColor" xmlns="http://www.w3.org/2000/svg" class="h-full w-full"><rect width="512" height="512" x="0" y="0" rx="30" fill="transparent" stroke="transparent" stroke-width="0" stroke-opacity="100%" paint-order="stroke"></rect><svg width="256px" height="256px" viewBox="0 0 24 24" fill="currentColor" x="128" y="128" role="img" style="display:inline-block;vertical-align:middle" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path fill="currentColor" d="M10.27 12h3.46a1.5 1.5 0 0 0 1.48-1.75l-.3-1.79a2.951 2.951 0 0 0-5.82.01l-.3 1.79c-.15.91.55 1.74 1.48 1.74zm-8.61-.89c-.13.26-.18.57-.1.88c.16.69.76 1.03 1.53 1h1.95c.83 0 1.51-.58 1.51-1.29c0-.14-.03-.27-.07-.4c-.01-.03-.01-.05.01-.08c.09-.16.14-.34.14-.53c0-.31-.14-.6-.36-.82c-.03-.03-.03-.06-.02-.1c.07-.2.07-.43.01-.65a1.12 1.12 0 0 0-.99-.74a.09.09 0 0 1-.07-.03C5.03 8.14 4.72 8 4.37 8c-.3 0-.57.1-.75.26c-.03.03-.06.03-.09.02a1.24 1.24 0 0 0-1.7 1.03c0 .02-.01.04-.03.06c-.29.26-.46.65-.41 1.05c.03.22.12.43.25.6c.03.02.03.06.02.09zm14.58 2.54c-1.17-.52-2.61-.9-4.24-.9c-1.63 0-3.07.39-4.24.9A2.988 2.988 0 0 0 6 16.39V18h12v-1.61c0-1.18-.68-2.26-1.76-2.74zm-15.02.93A2.01 2.01 0 0 0 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29c-.37-.06-.74-.1-1.13-.1c-.99 0-1.93.21-2.78.58zm21.56 0A6.95 6.95 0 0 0 20 14c-.39 0-.76.04-1.13.1c.4.68.63 1.46.63 2.29V18H24v-1.57c0-.81-.48-1.53-1.22-1.85zM22 11v-.5c0-1.1-.9-2-2-2h-2c-.42 0-.65.48-.39.81l.7.63c-.19.31-.31.67-.31 1.06c0 1.1.9 2 2 2s2-.9 2-2z"/></g></svg></svg>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
  </div>
{% endblock %}

{% block extra_js %}

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const search = document.getElementById('search_base');
        const allGroupe = document.getElementById('allGroupe'); 
        const groupes = allGroupe.querySelectorAll('.groupe');
      
        search.addEventListener('input', (e) => {
          const value = e.target.value.toLowerCase();
          groupes.forEach(groupe => {
            const name = groupe.querySelector('.flex.flex-col.justify-center > a').textContent.toLowerCase();
            if (name.includes(value)) {
              groupe.style.display = 'flex';
            } else {
              groupe.style.display = 'none';
            }
          });
        });
      });
</script>

{% endblock %}